<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}"
>
<head>
    <title>Edit Car</title>
    <meta name="_csrf" th:content="${_csrf.token}">
    <script src="/webjars/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/webjars/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/webjars/toastr/2.1.0/toastr.css">

    <link rel="stylesheet" href="/webjars/sweetalert2/11.14.4/dist/sweetalert2.min.css">
    <script src="/webjars/sweetalert2/11.14.4/dist/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="/css/carowner/edit-car.css">
    <style>
    </style>
</head>

<body>
<th:block layout:fragment="content">
    <body>

    <!-- Modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalTitle">No Title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="ModalBody">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-secondary" id="confirm">Yes</button>
                    <button type="button" class="btn btn-secondary" id="notConfirm">No</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal form Edit Basic Info-->
    <div class="modal fade" id="formEditBasicInfo" tabindex="-1" role="dialog" aria-labelledby="formEditBasicInfoLabel">
        <div class="modal-dialog" role="document" style="max-width: 700px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="formEditBasicInfoLabel">Application for change</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="resetForm('basicInfoForm')">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="basicInfoForm" onsubmit="sendApplicationChange()">
                        <h5 class="card-title">Basic information</h5>
                        <div class="row">
                            <div class="col-lg-6 mb-3 ">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text ">License plate</span>
                                    </div>
                                    <input type="text" class="form-control"
                                           aria-label="Sizing example input"
                                           aria-describedby="inputGroup-sizing-default"
                                           id="licensePlate" name="licensePlate"
                                           th:value="${car.licensePlate}"
                                    >
                                </div>
                                <a class="validate-msg" id="LicensePlateValidate">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="color"
                                        >Color</label>
                                    </div>
                                    <select class="custom-select"
                                            id="color" name="color">
                                        <option value="" th:selected="${car.color == null}">
                                            Choose...
                                        </option>
                                        <option value="Red" th:selected="${car.color == 'Red'}">
                                            Red
                                        </option>
                                        <option value="Green"
                                                th:selected="${car.color == 'Green'}">
                                            Green
                                        </option>
                                        <option value="Blue"
                                                th:selected="${car.color == 'Blue'}">
                                            Blue
                                        </option>
                                        <option value="Black"
                                                th:selected="${car.color == 'Black'}">
                                            Black
                                        </option>
                                        <option value="Grey"
                                                th:selected="${car.color == 'Grey'}">
                                            Grey
                                        </option>
                                        <option value="Gold"
                                                th:selected="${car.color == 'Gold'}">
                                            Gold
                                        </option>
                                        <option value="Silver"
                                                th:selected="${car.color == 'Silver'}">Silver
                                        </option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="brand">Brand
                                            Name</label>
                                    </div>
                                    <select class="custom-select" id="brand" name="brand">
                                        <option value="">Choose...</option>
                                        <th:block th:each="brand : ${brands}">
                                            <option th:value="${brand.brandId}"
                                                    th:text="${brand.brandName}"
                                                    th:selected="${car.brand?.brandId == brand.brandId}"></option>
                                        </th:block>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3 ">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text ">Model</span>
                                    </div>
                                    <input type="text" class="form-control"
                                           aria-label="Sizing example input"
                                           aria-describedby="inputGroup-sizing-default"
                                           id="model" name="model"
                                           th:value="${car.model}">
                                </div>
                                <a class="validate-msg" id="modelValidate">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="productionYear">Production
                                            year</label>
                                    </div>
                                    <select class="custom-select" id="productionYear" name="productionYear">
                                        <option value="">Choose</option>
                                        <option value="2022" th:selected="${car.productionYear == 2022}">2022</option>
                                        <option value="2023" th:selected="${car.productionYear == 2023}">2023</option>
                                        <option value="2024" th:selected="${car.productionYear == 2024}">2024</option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="seatNo">No of seats</label>
                                    </div>
                                    <select class="custom-select" id="seatNo" name="seatNo">
                                        <option value="">Choose</option>
                                        <option value="2" th:selected="${car.seat == 2}">2</option>
                                        <option value="4" th:selected="${car.seat == 4}">4</option>
                                        <option value="5" th:selected="${car.seat == 5}">5</option>
                                        <option value="7" th:selected="${car.seat == 7}">7</option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <p>Transmission</p>
                                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                    <label class="btn btn-secondary"
                                           th:classappend="${car.transmission == 'Automatic'} ? 'active'">
                                        <input type="radio" name="transmission" id="option1" value="Automatic"
                                               th:checked="${car.transmission == 'Automatic'}"> Automatic
                                    </label>
                                    <label class="btn btn-secondary"
                                           th:classappend="${car.transmission == 'Manual'} ? 'active'">
                                        <input type="radio" name="transmission" id="option2" value="Manual"
                                               th:checked="${car.transmission == 'Manual'}"> Manual
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <p>Fuel</p>
                                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                    <label class="btn btn-secondary"
                                           th:classappend="${car.fuelType == 'Gasoline'} ? 'active'">
                                        <input type="radio" name="fuel" id="option3" value="Gasoline"
                                               th:checked="${car.fuelType == 'Gasoline'}"> Gasoline
                                    </label>
                                    <label class="btn btn-secondary"
                                           th:classappend="${car.fuelType == 'Diesel'} ? 'active'">
                                        <input type="radio" name="fuel" id="option4" value="Diesel"
                                               th:checked="${car.fuelType == 'Diesel'}"> Diesel
                                    </label>
                                </div>
                            </div>
                        </div>
                        <h5 class="card-title">Documents</h5>
                        <div class="document">
                            <div class="row m-0">
                                <div class="col-lg-4">
                                    <input type="hidden" id="registrationImg" th:value="${car.registration}">
                                    <p>Registration</p>
                                    <label for="input-file1" class="drop-area"
                                           id="drop-area1" style="height: 160px; padding: 15px">
                                        <input type="file" id="input-file1"
                                               accept=".jpg,.jpeg,.png"
                                               hidden>
                                        <div class="img-view" id="img-view1"
                                             th:data-image-url="${car.getRegistration()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>

                                <div class="col-lg-4">
                                    <input type="hidden" id="certificateImg" th:value="${car.certificate}">
                                    <p>certificate</p>
                                    <label for="input-file2" class="drop-area"
                                           id="drop-area2" style="height: 160px; padding: 15px">
                                        <input type="file" id="input-file2"
                                               accept=".jpg,.jpeg,.png"
                                               hidden>
                                        <div class="img-view" id="img-view2"
                                             th:data-image-url="${car.getCertificate()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>

                                <div class="col-lg-4">
                                    <input type="hidden" id="insuranceImg" th:value="${car.insurance}">
                                    <p>Insurance</p>
                                    <label for="input-file3" class="drop-area"
                                           id="drop-area3" style="height: 160px; padding: 15px">
                                        <input type="file" id="input-file3"
                                               accept=".jpg,.jpeg,.png"
                                               hidden>
                                        <div class="img-view" id="img-view3" th:data-image-url="${car.getInsurance()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                            onclick="resetForm('basicInfoForm')">Close
                    </button>
                    <button type="button" class="btn btn-primary" onclick="sendApplicationChange()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal view request change -->
    <div class="modal fade" id="viewRequestChange" tabindex="-1" role="dialog" aria-labelledby="formEditBasicInfoLabel" th:if="${carDraft != null}">
        <div class="modal-dialog" role="document" style="max-width: 700px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Application for change</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                        <h5 class="card-title">Basic information</h5>
                        <div class="row">
                            <div class="col-lg-6 mb-3 ">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text ">License plate</span>
                                    </div>
                                    <input type="text" class="form-control"
                                           aria-label="Sizing example input"
                                           aria-describedby="inputGroup-sizing-default"
                                           name="licensePlate"
                                           th:value="${carDraft.licensePlate}" disabled>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="color"
                                        >Color</label>
                                    </div>
                                    <select class="custom-select"
                                            name="color" disabled>
                                        <option value="" th:selected="${carDraft.color == null}">
                                            Choose...
                                        </option>
                                        <option value="Red" th:selected="${carDraft.color == 'Red'}">
                                            Red
                                        </option>
                                        <option value="Green"
                                                th:selected="${carDraft.color == 'Green'}">
                                            Green
                                        </option>
                                        <option value="Blue"
                                                th:selected="${carDraft.color == 'Blue'}">
                                            Blue
                                        </option>
                                        <option value="Black"
                                                th:selected="${carDraft.color == 'Black'}">
                                            Black
                                        </option>
                                        <option value="Grey"
                                                th:selected="${carDraft.color == 'Grey'}">
                                            Grey
                                        </option>
                                        <option value="Gold"
                                                th:selected="${carDraft.color == 'Gold'}">
                                            Gold
                                        </option>
                                        <option value="Silver"
                                                th:selected="${carDraft.color == 'Silver'}">Silver
                                        </option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="brand">Brand
                                            Name</label>
                                    </div>
                                    <select class="custom-select" name="brand" disabled>
                                        <option value="">Choose...</option>
                                        <th:block th:each="brand : ${brands}">
                                            <option th:value="${brand.brandId}"
                                                    th:text="${brand.brandName}"
                                                    th:selected="${carDraft.brand?.brandId == brand.brandId}"></option>
                                        </th:block>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3 ">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text ">Model</span>
                                    </div>
                                    <input type="text" class="form-control"
                                           aria-label="Sizing example input"
                                           aria-describedby="inputGroup-sizing-default"
                                           name="model"
                                           th:value="${carDraft.model}" disabled>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="productionYear">Production
                                            year</label>
                                    </div>
                                    <select class="custom-select" name="productionYear" disabled>
                                        <option value="">Choose</option>
                                        <option value="2022" th:selected="${carDraft.productionYear == 2022}">2022</option>
                                        <option value="2023" th:selected="${carDraft.productionYear == 2023}">2023</option>
                                        <option value="2024" th:selected="${carDraft.productionYear == 2024}">2024</option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <label class="input-group-text "
                                               for="seatNo">No of seats</label>
                                    </div>
                                    <select class="custom-select" name="seatNo" disabled>
                                        <option value="">Choose</option>
                                        <option value="2" th:selected="${carDraft.seat == 2}">2</option>
                                        <option value="4" th:selected="${carDraft.seat == 4}">4</option>
                                        <option value="5" th:selected="${carDraft.seat == 5}">5</option>
                                        <option value="7" th:selected="${carDraft.seat == 7}">7</option>
                                    </select>
                                </div>
                                <a class="validate-msg">Invalid</a>
                            </div>
                            <div class="col-lg-6 mb-3">
                                <p>Transmission</p>
                                <div class="btn-group btn-group-toggle" data-toggle="buttons" style="pointer-events: none">
                                    <label class="btn btn-secondary"
                                           th:classappend="${carDraft.transmission == 'Automatic'} ? 'active'">
                                        <input type="radio" name="transmission" value="Automatic"
                                               th:checked="${carDraft.transmission == 'Automatic'}"> Automatic
                                    </label>
                                    <label class="btn btn-secondary"
                                           th:classappend="${carDraft.transmission == 'Manual'} ? 'active'">
                                        <input type="radio" name="transmission" value="Manual"
                                               th:checked="${carDraft.transmission == 'Manual'}"> Manual
                                    </label>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <p>Fuel</p>
                                <div class="btn-group btn-group-toggle" data-toggle="buttons" style="pointer-events: none">
                                    <label class="btn btn-secondary"
                                           th:classappend="${carDraft.fuelType == 'Gasoline'} ? 'active'">
                                        <input type="radio" name="fuel" value="Gasoline"
                                               th:checked="${carDraft.fuelType == 'Gasoline'}"> Gasoline
                                    </label>
                                    <label class="btn btn-secondary"
                                           th:classappend="${carDraft.fuelType == 'Diesel'} ? 'active'">
                                        <input type="radio" name="fuel" value="Diesel"
                                               th:checked="${carDraft.fuelType == 'Diesel'}"> Diesel
                                    </label>
                                </div>
                            </div>
                        </div>
                        <h5 class="card-title">Documents</h5>
                        <div class="document">
                            <div class="row m-0">
                                <div class="col-lg-4">
                                    <p>Registration</p>
                                    <label for="input-file1" class="drop-area"
                                           style="height: 160px; padding: 15px">
                                        <div class="img-view" id="img-view1-change-preview"
                                             th:data-image-url="${carDraft.getRegistration()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>

                                <div class="col-lg-4">
                                    <p>certificate</p>
                                    <label for="input-file2" class="drop-area"
                                           style="height: 160px; padding: 15px">
                                        <div class="img-view" id="img-view2-change-preview"
                                             th:data-image-url="${carDraft.getCertificate()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>

                                <div class="col-lg-4">
                                    <p>Insurance</p>
                                    <label for="input-file3" class="drop-area"
                                           style="height: 160px; padding: 15px">
                                        <div class="img-view" id="img-view3-change-preview"
                                             th:data-image-url="${carDraft.getInsurance()}">
                                            <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                            <p>Drag or drop or click here<br>to upload
                                                file</p>
                                            <span>Upload type: .jpg , .jpeg , .png</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>

    <section class="hero-wrap hero-wrap js-fullheight" data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-start">
                <div class="col-md-9 ftco-animate">
                    <p class="breadcrumbs"><span class="mr-2"><a href="/">Home <i class="ion-ios-arrow-forward"></i></a></span>
                        <span class="mr-2"><a href="/car-owner/my-cars">MY CARS <i
                                class="ion-ios-arrow-forward"></i></a></span><span>CAR DETAILS <i
                                class="ion-ios-arrow-forward"></i></span></p>
                    <h1 class="mb-3 bread">Car Detail</h1>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section p-0" style="min-height: 500px !important;">
        <div class="container">
            <!-- Modal -->
            <div class="modal fade" id="hasDraftModal" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="hasDraftModalTitle">No Title</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" id="hasDraftModalBody">
                            ...
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-secondary" id="carContinues">Yes</button>
                            <button type="button" class="btn btn-secondary" id="carAddNew">No</button>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <div class="container pb-5">
            <div class="row mt-5">
                <div class="col-md-12">
                    <div class="table-wrap">
                        <div class="d-flex justify-content-center">
                            <div class="card align-items-start display-flex-center align-items-center"
                                 style="">
                                <div class="card-body text-left w-100">
                                    <h5 class="card-title"></h5>
                                    <div class="row d-flex justify-content-center">
                                        <th:block th:object="${car}">
                                            <input type="hidden" id="statusCar"
                                                   th:value="${car.getCarStatus().getStatusId()}">
                                            <input type="text" th:value="${car.getCarId()}" th:id="carId" hidden>
                                            <div class="col-lg-12 row p-3" style="border-bottom: solid 3px #01d28e">
                                                <div class="col-lg-5 col-md-6 d-flex align-items-center">
                                                    <div class="wrapper" style="max-height: 270px">
                                                        <input type="radio" name="slide-1" id="one-1" checked>
                                                        <input type="radio" name="slide-1" id="two-1">
                                                        <input type="radio" name="slide-1" id="three-1">
                                                        <input type="radio" name="slide-1" id="four-1">
                                                        <div class="img img-1">
                                                            <img th:src="'/'+${car.getFrontImage()}"
                                                                 style="background: #1a1a1a" alt="">
                                                        </div>
                                                        <div class="img img-2">
                                                            <img th:src="'/'+${car.getBackImage()}"
                                                                 style="background: #1a1a1a" alt="">
                                                        </div>
                                                        <div class="img img-3">
                                                            <img th:src="'/'+${car.getLeftImage()}"
                                                                 style="background: #1a1a1a" alt="">
                                                        </div>
                                                        <div class="img img-4">
                                                            <img th:src="'/'+${car.getRightImage()}"
                                                                 style="background: #1a1a1a" alt="">
                                                        </div>
                                                        <div class="sliders">
                                                            <label for="one-1" id="label-one-1" class="one"></label>
                                                            <label for="two-1" id="label-two-1" class="two"></label>
                                                            <label for="three-1" id="label-three-1"
                                                                   class="three"></label>
                                                            <label for="four-1" id="label-four-1" class="four"></label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-5 col-md-6 justify-content-center align-items-center">
                                                    <div class="row justify-content-center align-items-center align-content-center">
                                                        <h1 th:text="${car.getCarName() == null ? car.getBrand().getBrandName()+' '+car.getModel()+' '+car.getProductionYear() :car.getCarName()}"
                                                            class="col-lg-12 col-md-12 col-sm-12 text-center"
                                                            style="font-size: 2rem">
                                                        </h1>
                                                        <div class="col-lg-12 row"
                                                             style="display: flex; align-items: center">
                                                            <p class="col-lg-3 col-md-5 col-sm-5 col-4 p-0 pr-2">
                                                                Ratings: </p>
                                                            <div class="rating">
                                                                <div class="star"
                                                                     th:style="'width:' + ${T(java.lang.Math).random() * 100} +'%'">
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                </div>
                                                                <div class="star-base">
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                    <i class="fa fa-star"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-12 row"
                                                             style="display: flex; align-items: center">
                                                            <p class="col-lg-3 col-md-5 col-sm-5 col-4 p-0 pr-2">
                                                                No. of rides: </p>
                                                            <p>0</p>
                                                        </div>
                                                        <div class="col-lg-12 row"
                                                             style="display: flex; align-items: center; white-space: nowrap;">
                                                            <p class="col-lg-3 col-md-5 col-sm-5 col-4 p-0 pr-2">
                                                                Price: </p>
                                                            <div class="d-flex" style="max-width: 316px;">
                                                                <p th:text="${#numbers.formatDecimal(car.getBasePrice(), 0, 'POINT', 0, 'POINT')}"
                                                                   id="previewPrice"
                                                                   style="overflow: hidden;text-overflow: ellipsis;width: 100%;white-space: nowrap;">
                                                                    0</p>
                                                                <p style="padding-left: 5px">VND/day</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-12 row"
                                                             style="display: flex; align-items: center">
                                                            <p class="col-lg-3 col-md-5 col-sm-5 col-4 p-0 pr-2">
                                                                Location: </p>
                                                            <p class="col-lg-9 col-md-7 col-sm-7 col-8 p-0"
                                                               id="previewLocation"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;   '...' "
                                                               th:text="${car.getAddress().getProvince()}">No</p>
                                                        </div>
                                                        <th:block th:if="${car.getCarStatus().getStatusId()==8}">
                                                            <div class="col-lg-12 row"
                                                                 style="display: flex; align-items: center">
                                                                <p class="col-lg-3 col-md-5 col-sm-5 col-4 p-0 pr-2">
                                                                    Status: </p>
                                                                <p style="color: #ff9100; font-weight: bold">
                                                                    Verifying</p>
                                                            </div>
                                                        </th:block>
                                                        <th:block th:if="${car.getCarStatus().getStatusId() != 8}">
                                                            <div class="col-lg-12 mb-3">
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-prepend">
                                                                        <label class="input-group-text"
                                                                               for="province">Status</label>
                                                                    </div>
                                                                    <select class="custom-select" id="carStatus">
                                                                        <th:block
                                                                                th:if="${car.carStatus.statusId == 1 or car.carStatus.statusId == 3}">
                                                                            <option th:value="1" th:text="'Available'"
                                                                                    th:selected="${car.carStatus.statusId == 1}">
                                                                                ${car.carStatus.name}
                                                                            </option>
                                                                            <option th:value="3" th:text="'Stopped'"
                                                                                    th:selected="${car.carStatus.statusId == 3}">
                                                                                ${car.carStatus.name}
                                                                            </option>
                                                                        </th:block>

                                                                        <th:block
                                                                                th:if="${car.carStatus.statusId == 2 or car.carStatus.statusId == 11 or car.carStatus.statusId == 14 or car.carStatus.statusId == 15}">
                                                                            <option th:value="${car.carStatus.statusId}"
                                                                                    th:text="'Booked'"
                                                                                    th:disabled="true"
                                                                                    th:selected="${car.carStatus.statusId == 2 or car.carStatus.statusId == 11 or car.carStatus.statusId == 14 or car.carStatus.statusId == 15}">
                                                                                Booked
                                                                            </option>
                                                                        </th:block>


                                                                        <!-- For all other statuses, show all options and allow selection -->
                                                                        <th:block
                                                                                th:if="${car.carStatus.statusId != 1 and car.carStatus.statusId != 3 and car.carStatus.statusId != 2 and car.carStatus.statusId != 11 and car.carStatus.statusId != 14 and car.carStatus.statusId != 15}">
                                                                            <th:block
                                                                                    th:each="carStatus : ${carStatuses}">
                                                                                <option th:value="${carStatus.statusId}"
                                                                                        th:text="${carStatus.name}"
                                                                                        th:selected="${carStatus.statusId == car.carStatus.statusId}">
                                                                                </option>
                                                                            </th:block>
                                                                        </th:block>
                                                                    </select>
                                                                </div>
                                                                <a class="validate-msg">Invalid</a>
                                                            </div>
                                                        </th:block>
                                                    </div>
                                                </div>
                                                <th:block th:if="${car.getCarStatus().getStatusId() == 14}">
                                                    <div class="col-lg-2 col-md-6 justify-content-center align-items-center">
                                                        <a th:if="${bookingStatus == 1}"
                                                           th:id="'confirm-deposit-btn-' + ${car.getCarId()}"
                                                           class="btn btn-primary"
                                                           th:attr="data-car-id=${car.getCarId()}"
                                                           style="background: #da1b1b !important;">
                                                            Confirm deposit
                                                        </a>
                                                    </div>
                                                </th:block>
                                                <th:block th:if="${car.getCarStatus().getStatusId() == 15}">
                                                    <div class="col-lg-2 col-md-6 justify-content-center align-items-center">
                                                        <a
                                                                th:id="'confirm-cancel-btn-' + ${car.getCarId()}"
                                                                class="btn btn-primary"
                                                                th:attr="data-car-id=${car.getCarId()}"
                                                                style="background: #000000 !important;">
                                                            Confirm cancel
                                                        </a>
                                                    </div>
                                                </th:block>


                                                <th:block th:if="${car.getCarStatus().getStatusId() == 16}">
                                                    <div class="col-lg-2 col-md-6 justify-content-center align-items-center">
                                                        <a
                                                           th:id="'confirm-payment-btn-' + ${car.getCarId()}"
                                                           class="btn btn-primary"
                                                           style="padding-right: 6px; padding-left: 6px; background: #da1b1b !important;"
                                                           th:attr="data-car-id=${car.getCarId()}"
                                                           th:onclick="'confirmReturn(' + ${car.getCarId()} + ')'">
                                                            Confirm Return
                                                        </a>
                                                    </div>
                                                </th:block>
                                            </div>

                                        </th:block>
                                    </div>

                                </div>
                                <div class="card-body text-left w-100">
                                    <nav class="mb-3">
                                        <div class="nav nav-tabs" id="nav-tab" role="tablist" style="column-gap: 4px">
                                            <button class="nav-link active" id="nav-home-tab" data-toggle="tab"
                                                    data-target="#nav-home" type="button" role="tab"
                                                    aria-controls="nav-home" aria-selected="true">Basic Information
                                            </button>
                                            <button class="nav-link" id="nav-profile-tab" data-toggle="tab"
                                                    data-target="#nav-profile" type="button" role="tab"
                                                    aria-controls="nav-profile" aria-selected="false">Details
                                            </button>
                                            <button class="nav-link" id="nav-contact-tab" data-toggle="tab"
                                                    data-target="#nav-contact" type="button" role="tab"
                                                    aria-controls="nav-contact" aria-selected="false">Pricing
                                            </button>
                                        </div>
                                    </nav>
                                    <form id="formCarUpdate">
                                        <div class="tab-content" id="nav-tabContent">
                                            <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                                 aria-labelledby="nav-home-tab">
                                                <div class="mb-3"
                                                     th:if="${(car.getCarStatus().getStatusId() == 1 || car.getCarStatus().getStatusId() == 3) && carDraft == null}">
                                                    <a class="btn-primary btn" onclick="editBasicInfo()">Want to change
                                                        this?, click here!</a>
                                                </div>
                                                <div class="mb-3"
                                                     th:if="${(car.getCarStatus().getStatusId() == 1 || car.getCarStatus().getStatusId() == 3) && carDraft != null}">
                                                    <p style="color: #ff9100">This car has a pending request change <a onclick="viewRequestChange()" style="color: #0b5ed7; cursor: pointer; font-size: 14px">(See here)</a>. Do you want to send a new request? <a class="btn-primary btn" onclick="editBasicInfo()">New Request</a></p>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                        <span class="input-group-text "
                                                                        >License plate</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="licensePlate"
                                                                   th:value="${car.licensePlate}"
                                                                   disabled>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <label class="input-group-text "
                                                                       for="color"
                                                                >Color</label>
                                                            </div>
                                                            <select class="custom-select"
                                                                    name="color"
                                                                    disabled>
                                                                <option value="" th:selected="${car.color == null}">
                                                                    Choose...
                                                                </option>
                                                                <option value="Red" th:selected="${car.color == 'Red'}">
                                                                    Red
                                                                </option>
                                                                <option value="Green"
                                                                        th:selected="${car.color == 'Green'}">
                                                                    Green
                                                                </option>
                                                                <option value="Blue"
                                                                        th:selected="${car.color == 'Blue'}">
                                                                    Blue
                                                                </option>
                                                                <option value="Black"
                                                                        th:selected="${car.color == 'Black'}">
                                                                    Black
                                                                </option>
                                                                <option value="Grey"
                                                                        th:selected="${car.color == 'Grey'}">
                                                                    Grey
                                                                </option>
                                                                <option value="Gold"
                                                                        th:selected="${car.color == 'Gold'}">
                                                                    Gold
                                                                </option>
                                                                <option value="Silver"
                                                                        th:selected="${car.color == 'Silver'}">Silver
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <label class="input-group-text "
                                                                       for="brand">Brand
                                                                    Name</label>
                                                            </div>
                                                            <select class="custom-select" name="brand"
                                                                    disabled>
                                                                <option value="">Choose...</option>
                                                                <th:block th:each="brand : ${brands}">
                                                                    <option th:value="${brand.brandId}"
                                                                            th:text="${brand.brandName}"
                                                                            th:selected="${car.brand?.brandId == brand.brandId}"></option>
                                                                </th:block>
                                                            </select>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                        <span class="input-group-text "
                                                                        >Model</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="model"
                                                                   th:value="${car.model}"
                                                                   disabled>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                        <span class="input-group-text "
                                                                        >Production Year</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="productionYear"
                                                                   th:value="${car.productionYear}"
                                                                   disabled>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                        <span class="input-group-text "
                                                                        >No Seats</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="seatNo" th:value="${car.seat}"
                                                                   disabled>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text ">Transmission</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="licensePlate"
                                                                   th:value="${car.transmission}" disabled>
                                                        </div>
                                                        <a class="validate-msg" id="TransmissionValidate">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3 ">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text ">Fuel</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   name="licensePlate"
                                                                   th:value="${car.fuelType}" disabled>
                                                        </div>
                                                        <a class="validate-msg" id="fuelValidate">Invalid</a>
                                                    </div>
                                                    <div style="width: 100%; overflow: auto">
                                                        <h5>Documents</h5>
                                                        <table class="table table-striped col-lg-12">
                                                            <thead class="thead-dark">
                                                            <tr>
                                                                <th scope="col">No</th>
                                                                <th scope="col">Name</th>
                                                                <th scope="col">Note</th>
                                                                <th scope="col">Link</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            <tr>
                                                                <th scope="row">1</th>
                                                                <td>Registration</td>
                                                                <td>Verified</td>
                                                                <td><a th:href="${registrationUrl}"
                                                                       download>Registration</a></td>
                                                            </tr>
                                                            <tr>
                                                                <th scope="row">2</th>
                                                                <td>Certification</td>
                                                                <td>Verified</td>
                                                                <td><a th:href="${certificateUrl}"
                                                                       download>Certification</a></td>
                                                            </tr>
                                                            <tr>
                                                                <th scope="row">3</th>
                                                                <td>Insurance</td>
                                                                <td>Verified</td>
                                                                <td><a th:href="${insuranceUrl}" download>Insurance</a>
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                                 aria-labelledby="nav-profile-tab">
                                                <div class="row">
                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">Mileage</span>
                                                            </div>
                                                            <input class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   id="mileage"
                                                                   th:value="${formattedMileage.replaceAll(',','')}">
                                                        </div>
                                                        <a class="validate-msg" id="mileageValidate">Invalid</a>
                                                    </div>

                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">Fuel consumption</span>
                                                            </div>
                                                            <input class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   id="fuelConsumption"
                                                                   th:value="${formattedFuelConsumption.replaceAll(',','')}">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">liter/100km</span>
                                                            </div>
                                                        </div>
                                                        <a class="validate-msg" id="fuelConsumptionValidate">Invalid</a>
                                                    </div>
                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <label class="input-group-text"
                                                                       for="province">Province</label>
                                                            </div>
                                                            <select class="custom-select" id="province"
                                                                    th:value="${car.getAddress().getProvince()}"
                                                                    th:data-default="${car.getAddress().getProvinceId()}">
                                                                <option value="">Select</option>
                                                            </select>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>

                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <label class="input-group-text"
                                                                       for="district">District</label>
                                                            </div>
                                                            <select class="custom-select" id="district"
                                                                    th:value="${car.getAddress().getDistrict()}"
                                                                    th:data-default="${car.getAddress().getDistrictId()}">
                                                                <option value="">Select</option>
                                                            </select>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>

                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <label class="input-group-text"
                                                                       for="ward">Ward</label>
                                                            </div>
                                                            <select class="custom-select" id="ward"
                                                                    th:value="${car.getAddress().getWard()}"
                                                                    th:data-default="${car.getAddress().getWardId()}">
                                                                <option value="">Select</option>
                                                            </select>
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>

                                                    <div class="col-lg-6 mb-3">
                                                        <div class="input-group input-group-sm">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">Home</span>
                                                            </div>
                                                            <input type="text" class="form-control"
                                                                   aria-label="Sizing example input"
                                                                   aria-describedby="inputGroup-sizing-default"
                                                                   id="street"
                                                                   th:value="${car.getAddress().getStreet()}">
                                                        </div>
                                                        <a class="validate-msg">Invalid</a>
                                                    </div>

                                                    <div class="input-group col-lg-6" style="min-height: 56px">
                                                        <span class="input-group-text"
                                                              style="border-top-right-radius: 0; border-bottom-right-radius: 0;">Description</span>
                                                        <textarea class="form-control" id="description"
                                                                  aria-label="With textarea"
                                                                  th:text="${car.getDescription()}"
                                                                  style="font-size: 14px;"
                                                                  placeholder="Description of your vehicle"></textarea>
                                                    </div>


                                                    <div style="padding: 10px">
                                                        <div class="row pl-4 pr-4">
                                                            <th:block th:each="function : ${additionalFunction}">
                                                                <label class="checkbox bounce col-lg-3 col-md-4 col-6 p-0 d-flex"
                                                                       style="align-items: center;column-gap: 6px;">
                                                                    <input type="checkbox"
                                                                           th:value="${function.functionId}"
                                                                           name="additionalFunction"
                                                                           th:checked="${car.getAdditionalFunctions() != null && car.additionalFunctions.contains(function)}">
                                                                    <svg viewBox="0 0 21 21">
                                                                        <polyline
                                                                                points="5 10.75 8.5 14.25 16 6"></polyline>
                                                                    </svg>
                                                                    <span th:text="${function.functionName}"></span>
                                                                </label>
                                                            </th:block>
                                                        </div>
                                                    </div>
                                                    <div class="document row m-auto w-100">
                                                        <div class="col-lg-3 col-sm-6">
                                                            <input type="hidden" id="frontImage"
                                                                   th:value="${car.getFrontImage()}">
                                                            <p class="">Front</p>
                                                            <label for="input-file4" class="drop-area"
                                                                   id="drop-area4">
                                                                <input type="file" id="input-file4"
                                                                       accept="image/*" class="file-input"
                                                                       hidden>
                                                                <div class="img-view" id="img-view4"
                                                                     th:data-image-url="${car.getFrontImage()}">
                                                                    <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                                                    <p>Drag or drop or click here<br>to upload
                                                                        file</p>
                                                                    <span>Upload type: .img, .png, .jpg, .jpeg</span>
                                                                </div>
                                                            </label>
                                                        </div>
                                                        <div class="col-lg-3 col-sm-6">
                                                            <input type="hidden" id="backImage"
                                                                   th:value="${car.getBackImage()}">
                                                            <p class="">Back</p>
                                                            <label for="input-file5" class="drop-area"
                                                                   id="drop-area5">
                                                                <input type="file" id="input-file5"
                                                                       accept="image/*" class="file-input"
                                                                       hidden>
                                                                <div class="img-view" id="img-view5"
                                                                     th:data-image-url="${car.getBackImage()}">
                                                                    <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                                                    <p>Drag or drop or click here<br>to upload
                                                                        file</p>
                                                                    <span>Upload type: .img, .png, .jpg, .jpeg</span>
                                                                </div>
                                                            </label>
                                                        </div>
                                                        <div class="col-lg-3 col-sm-6">
                                                            <input type="hidden" id="leftImage"
                                                                   th:value="${car.getLeftImage()}">
                                                            <p class="">Left</p>
                                                            <label for="input-file6" class="drop-area"
                                                                   id="drop-area6">
                                                                <input type="file" id="input-file6"
                                                                       accept="image/*" class="file-input"
                                                                       hidden>
                                                                <div class="img-view" id="img-view6"
                                                                     th:data-image-url="${car.getLeftImage()}">
                                                                    <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                                                    <p>Drag or drop or click here<br>to upload
                                                                        file</p>
                                                                    <span>Upload type: .img, .png, .jpg, .jpeg</span>
                                                                </div>
                                                            </label>
                                                        </div>
                                                        <div class="col-lg-3 col-sm-6">
                                                            <input type="hidden" id="rightImage"
                                                                   th:value="${car.getRightImage()}">
                                                            <p class="">Right</p>
                                                            <label for="input-file7" class="drop-area"
                                                                   id="drop-area7">
                                                                <input type="file" id="input-file7"
                                                                       accept="image/*" class="file-input"
                                                                       hidden>
                                                                <div class="img-view" id="img-view7"
                                                                     th:data-image-url="${car.getRightImage()}">
                                                                    <i class="fa-solid fa-file-arrow-up fa-2x"></i>
                                                                    <p>Drag or drop or click here<br>to upload
                                                                        file</p>
                                                                    <span>Upload type: .img, .png, .jpg, .jpeg</span>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                                 aria-labelledby="nav-contact-tab">
                                                <div>
                                                    <div class="row">
                                                        <div class="col-lg-6 mb-3">
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text">Base price</span>
                                                                </div>
                                                                <input class="form-control"
                                                                       aria-label="Sizing example input"
                                                                       aria-describedby="inputGroup-sizing-default"
                                                                       id="basePrice"
                                                                       th:value="${formattedBasePrice.replaceAll(',','')}">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">VND/Day</span>
                                                                </div>
                                                            </div>
                                                            <a class="validate-msg" id="basePriceValidate">Invalid</a>
                                                        </div>

                                                        <div class="col-lg-6 mb-3">
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text">Car price</span>
                                                                </div>
                                                                <input class="form-control"
                                                                       aria-label="Sizing example input"
                                                                       aria-describedby="inputGroup-sizing-default"
                                                                       id="carPrice"
                                                                       th:value="${formattedCarPrice.replaceAll(',','')}">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">VND/Day</span>
                                                                </div>
                                                            </div>
                                                            <a class="validate-msg" id="carPriceValidate">Invalid</a>
                                                        </div>
                                                        <div class="col-lg-6 mb-3">
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text">Deposit</span>
                                                                </div>
                                                                <input class="form-control"
                                                                       aria-label="Sizing example input"
                                                                       aria-describedby="inputGroup-sizing-default"
                                                                       id="deposit"
                                                                       th:value="${formattedDeposit.replaceAll(',','')}">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">VND</span>
                                                                </div>
                                                            </div>
                                                            <a class="validate-msg" id="depositValidate">Invalid</a>
                                                        </div>

                                                    </div>
                                                </div>
                                                <h5 class="card-title">Term of Use</h5>
                                                <div>
                                                    <div class="row">
                                                        <div class="col-lg-12 col-md-12 mb-3">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <div class="input-group-text">
                                                                        <label class="form-check-label"
                                                                               style="padding: 0 10px;">
                                                                            Write here
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <input type="text" class="form-control"
                                                                       aria-label="Text input with checkbox"
                                                                       id="termOfUse" th:value="${car.terms}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!--                                <p th:if="${car.getCarStatus().getStatusId() != 1 || car.getCarStatus().getStatusId() != 3}" style="color: red">You can't change this car information now!</p>-->
                                <div>
                                    <button class="btn-primary btn" style="width: 100px; margin: 10px 0 10px 0"
                                            onclick="window.history.back()">Back
                                    </button>
                                    <a th:if="${car.getCarStatus().getStatusId() == 8}" class="btn-danger btn"
                                       style="width: 100px; margin: 10px 0 10px 0"
                                       onclick="deleteCar()">Delete
                                    </a>
                                    <th:block
                                            th:if="${car.getCarStatus().getStatusId() == 1 || car.getCarStatus().getStatusId() == 3}">
                                        <button class="btn-primary btn" style="width: 100px; margin: 10px 0 10px 0"
                                                onclick="window.location.reload()">Discard
                                        </button>
                                        <button class="btn-primary btn" style="width: 100px; margin: 10px 0 10px 0"
                                                onclick="updateCar()">Save
                                        </button>
                                    </th:block>
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
        <svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                    stroke="#F96D00"/>
        </svg>
    </div>

<!--Script for form update basic information -->
    <script>
        <!--Edit form for basic information-->
        function editBasicInfo() {
            $('#formEditBasicInfo').modal({
                backdrop: 'static',
            })
        }

        function sendApplicationChange(){
            //Validate
            if(!validateLicensePlate() || !validateModel()){
                return false;
            }
            //Get data
            let carId = $('#carId').val();
            let licensePlate = $('#licensePlate').val();
            let model = $('#model').val();
            let color = $('#color').val();
            let productionYear = $('#productionYear').val();
            let seatNo = $('#seatNo').val();
            const transmission = document.querySelector('input[name="transmission"]:checked');
            let transmissionType = transmission ? transmission.value : null;
            const fuel = document.querySelector('input[name="fuel"]:checked');
            let   fuelType = fuel ? fuel.value : null;

            //Check data
            // console.log("CarId: ", carId);
            // console.log("LicensePlate: ", licensePlate);
            // console.log("Model: ", model);
            // console.log("Color: ", color);
            // console.log("ProductionYear: ", productionYear);
            // console.log("SeatNo: ", seatNo);
            // console.log("Transmission: ", transmissionType);
            // console.log("FuelType: ", fuelType);
            // console.log("Registration: ", registration);
            // console.log("Certification: ", certification);
            // console.log("Insurance: ", insurance);

            const formData = new FormData();
            formData.append('carId', carId);
            formData.append('licensePlate', licensePlate);
            formData.append('model', model);
            formData.append('color', color);
            formData.append('productionYear', productionYear);
            formData.append('seatNo', seatNo);
            formData.append('transmissionType', transmissionType);
            formData.append('fuelType', fuelType);
            const fileInputs = {
                "registration": document.getElementById("input-file1"),
                "certificate": document.getElementById("input-file2"),
                "insurance": document.getElementById("input-file3"),
            };

            // Check if files exist before adding to FormData
            for (const [key, input] of Object.entries(fileInputs)) {
                if (input && input.files && input.files[0]) {
                    formData.append(key, input.files[0]);
                } else {
                    // If file is not selected, append null or empty file to maintain the structure
                    formData.append(key, new Blob([], {type: 'application/octet-stream'}));
                }
            }

            //Send data
            $.ajax({
                url: '/car-owner/request-change-basic-information',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                headers: {
                    'X-CSRF-TOKEN': csrfToken
                },
                success: function (response) {
                    console.log("Edit basic information successfully", response);
                    Swal.fire({
                        title: 'Success!',
                        text: response,
                        icon: 'success',
                        confirmButtonText: 'OK'
                    }).then(() => {
                        window.location.reload();
                    });
                },
                error: function (error) {
                    console.log("Error edit basic information", error.responseText);
                    Swal.fire({
                        title: 'Warning!',
                        text: error.responseText,
                        icon: 'warning',
                        confirmButtonText: 'OK'
                    });
                }
            });
        }

        function viewRequestChange(){
            const img1ChangePreview = document.getElementById('img-view1-change-preview');
            const img2ChangePreview = document.getElementById('img-view2-change-preview');
            const img3ChangePreview = document.getElementById('img-view3-change-preview');
            const existingImageUrl1 = img1ChangePreview.getAttribute('data-image-url');
            const existingImageUrl2 = img2ChangePreview.getAttribute('data-image-url');
            const existingImageUrl3 = img3ChangePreview.getAttribute('data-image-url');
            displayExistingImage(img1ChangePreview, existingImageUrl1);
            displayExistingImage(img2ChangePreview, existingImageUrl2);
            displayExistingImage(img3ChangePreview, existingImageUrl3);
            $('#viewRequestChange').modal({
                backdrop: 'static',
            })
        }

        function resetForm(formId) {
            document.getElementById(formId).reset();
            // Reset all input fields
            const inputFields = document.querySelectorAll(`#${formId} input`);
            inputFields.forEach(input => {
                input.classList.remove('is-invalid');
                input.classList.remove('is-valid');
            });

            // Reset all select fields
            const selectFields = document.querySelectorAll(`#${formId} select`);
            selectFields.forEach(select => {
                select.classList.remove('is-invalid');
                select.classList.remove('is-valid');
            });

            // Reset all textarea fields
            const textareaFields = document.querySelectorAll(`#${formId} textarea`);
            textareaFields.forEach(textarea => {
                textarea.classList.remove('is-invalid');
                textarea.classList.remove('is-valid');
            });

            // Reset all validate messages
            const validateMsgs = document.querySelectorAll(`#${formId} .validate-msg`);
            validateMsgs.forEach(msg => {
                msg.style.display = 'none';
            });

        }

        function submitForm(formId){
            document.getElementById(formId).submit();
        }
    </script>
    <script>
        const statusCar = document.getElementById('statusCar').value;
        if (statusCar != 1 && statusCar != 3) {
            $("#formCarUpdate :input").prop('disabled', true);
        }


        function checkPayment(carId) {
            console.log("checkPayment called with carId:", carId); // Kiểm tra xem hàm có được gọi không

            $.ajax({
                url: '/car-owner/check-payment',
                type: 'get',
                data: {carId: carId},
                success: function (response) {
                    console.log("Check payment successfully", response);

                    Swal.fire({
                        title: 'Confirm Payment!',
                        text: response.message,
                        icon: 'question',
                        showCancelButton: true,
                        confirmButtonText: 'Yes',
                        cancelButtonText: 'No',
                        customClass: {
                            confirmButton: 'my-custom-button'
                        }
                    }).then((result) => {
                        console.log("Swal result:", result);
                        if (result.isConfirmed) {
                            confirmReturnCar(carId);
                            console.log("Calling confirmReturnCar with carId:", carId);
                        }
                    });
                },
                error: function (error) {
                    console.log("Error confirm payment", error);
                    let errorMessage;
                    try {
                        const errorResponse = JSON.parse(error.responseText);
                        errorMessage = errorResponse.message || 'An error occurred.';
                    } catch (e) {
                        errorMessage = 'An unexpected error occurred.';
                    }

                    Swal.fire({
                        title: 'Error!',
                        text: errorMessage,
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                }
            });
        }

        function confirmReturnCar(carId) {

            console.log(carId);
            $.ajax({
                    url: '/car-owner/confirm-payment-car',
                    type: 'get',
                    data: {carId: carId},
                    success: function (response) {
                        console.log("Confirm payment car response", response);

                        if (response.status === 'success1') {
                            Swal.fire({
                                title: 'Booking Successfully Completed.',
                                text: response.message,
                                icon: 'success',
                                confirmButtonText: 'OK'
                            }).then(() => {
                                window.location.href = '/car-owner/edit-car/' + carId;
                            })
                        } else {
                            Swal.fire({
                                title: 'Error!',
                                text: response.message,
                                icon: 'error',
                                confirmButtonText: 'OK'
                            }).then(() => {
                                window.location.href = '/car-owner/edit-car/' + carId;
                            });
                        }
                    },
                    error:

                        function (error) {
                            console.log("Error confirming return payment", error);
                            Swal.fire({
                                title: 'Error!',
                                text: 'An error occurred. Please try again.',
                                icon: 'error',
                                confirmButtonText: 'OK'
                            }).then(() => {
                                window.location.href = '/car-owner/edit-car/' + carId;
                            });
                        }
                }
            )
            ;
        }


        document.addEventListener('DOMContentLoaded', function () {
            console.log("DOM fully loaded and parsed");

            const confirmCancelBtns = document.querySelectorAll('[id^="confirm-cancel-btn-"]');
            confirmCancelBtns.forEach(btn => {
                btn.addEventListener('click', function (event) {
                    event.preventDefault();

                    // Lấy carId từ data-car-id
                    const carId = this.getAttribute('data-car-id');

                    Swal.fire({
                        title: 'Confirm cancel booking and refund deposit to customer!',
                        icon: 'warning',
                        confirmButtonText: 'Yes',
                        cancelButtonText: 'No',
                        showCancelButton: true,
                        customClass: {
                            confirmButton: 'custom-confirm-btn',
                            cancelButton: 'custom-cancel-btn'
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            console.log('User confirmed the cancel for car with ID:', carId);
                            window.location.href = `/car-owner/confirm-cancel?carId=${carId}`;
                        } else {
                            console.log('User canceled the action');
                        }
                    });
                });
            });
        });


        document.addEventListener('DOMContentLoaded', function () {
            console.log("DOM fully loaded and parsed");

            const confirmDepositBtns = document.querySelectorAll('[id^="confirm-deposit-btn-"]');
            confirmDepositBtns.forEach(btn => {
                btn.addEventListener('click', function (event) {
                    event.preventDefault();

                    // Lấy carId từ data-car-id
                    const carId = this.getAttribute('data-car-id');

                    Swal.fire({
                        title: 'Please confirm that you have received the deposit for this booking.',
                        icon: 'warning',
                        confirmButtonText: 'Yes',
                        cancelButtonText: 'No',
                        showCancelButton: true,
                        customClass: {
                            confirmButton: 'custom-confirm-btn',
                            cancelButton: 'custom-cancel-btn'
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            console.log('User confirmed the deposit for car with ID:', carId);
                            window.location.href = `/car-owner/confirm-deposit?carId=${carId}`;
                        } else {
                            console.log('User canceled the action');
                        }
                    });
                });
            });
        });


        const csrfToken = $('meta[name="_csrf"]').attr('content');


        function updateCar() {
            const mileage = document.getElementById('mileage').value;
            const fuelConsumption = document.getElementById('fuelConsumption').value;
            const province = document.getElementById('province').value + "," + document.getElementById('province').options[document.getElementById('province').selectedIndex].text;
            const district = document.getElementById('district').value + "," + document.getElementById('district').options[document.getElementById('district').selectedIndex].text;
            const ward = document.getElementById('ward').value + "," + document.getElementById('ward').options[document.getElementById('ward').selectedIndex].text;
            const street = document.getElementById('street').value;
            const checkboxes = document.querySelectorAll('input[name="additionalFunction"]:checked');
            const additionalFunction = [];
            checkboxes.forEach((checkbox) => {
                additionalFunction.push(checkbox.value);
            });
            const basePrice = document.getElementById('basePrice').value;
            const deposit = document.getElementById('deposit').value;
            const termOfUse = document.getElementById('termOfUse').value;
            const carPrice = document.getElementById('carPrice').value;
            const carId = document.getElementById('carId').value;
            const carStatus = document.getElementById('carStatus') == null ? -1 : document.getElementById('carStatus').value;
            const description = document.getElementById('description').value;

            const carData = {
                mileage: mileage,
                fuelConsumption: fuelConsumption,
                additionalFunction: additionalFunction.join(','),
                province: province,
                district: district,
                ward: ward,
                home: street,
                basePrice: basePrice,
                deposit: deposit,
                terms: termOfUse,
                carPrice: carPrice,
                description: description,
            };

            const formData = new FormData();
            //Add carId to formData
            formData.append("carId", carId);
            //Add carStatus to formData
            formData.append("carStatus", carStatus);
            // Add the carDraft object as JSON string
            formData.append("carData", JSON.stringify(carData));

            const fileInputs = {
                "frontImage": document.getElementById("input-file4"),
                "backImage": document.getElementById("input-file5"),
                "leftImage": document.getElementById("input-file6"),
                "rightImage": document.getElementById("input-file7")
            };

            // Check if files exist before adding to FormData
            for (const [key, input] of Object.entries(fileInputs)) {
                if (input && input.files && input.files[0]) {
                    formData.append(key, input.files[0]);
                } else {
                    // If file is not selected, append null or empty file to maintain the structure
                    formData.append(key, new Blob([], {type: 'application/octet-stream'}));
                }
            }
            console.log(carData);
            console.log(fileInputs);
            if (!validate()) {
                return false;
            } else {
                $.ajax({
                    url: '/car-owner/update-car',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    headers: {
                        'X-CSRF-TOKEN': csrfToken
                    },
                    success: function (response) {
                        console.log("Car updated successfully", response);
                        Swal.fire({
                            title: 'Updated!',
                            text: '' +
                                '',
                            icon: 'success',
                            confirmButtonText: 'OK',
                            customClass: {
                                confirmButton: 'my-custom-button'
                            }
                        });
                        return true;
                    },
                    error: function (xhr, status, error) {
                        if (xhr.status === 400) {
                            // // Display the custom error message from the server
                            // $('#confirmModal').modal('show');
                            // $('#ModalTitle').text("Format!");
                            // $('#ModalBody').html(xhr.responseText);
                            // $('#confirm').text("OK").click(function () {
                            //     $('#confirmModal').modal('hide');
                            // });
                            // $('#notConfirm').hide();
                            console.log("Bad request: ", xhr.responseText);
                            Swal.fire({
                                title: 'Not Updated!',
                                text: xhr.responseText,
                                icon: 'warning',
                                confirmButtonText: 'OK',
                                customClass: {
                                    confirmButton: 'my-custom-button'
                                }
                            });
                        } else if (xhr.status === 401) {
                            console.log("Unauthorized update: ", xhr.responseText);
                            Swal.fire({
                                title: 'Not Updated!',
                                text: xhr.responseText,
                                icon: 'warning',
                                confirmButtonText: 'OK',
                                customClass: {
                                    confirmButton: 'my-custom-button'
                                }
                            });
                        } else {
                            console.log("Other Error:", error);
                        }
                        return false;
                    }
                });
            }
        }

        function deleteCar() {
            const carId = document.getElementById('carId').value;
            console.log("Delete car with carId:", carId);
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, delete it!',
                cancelButtonText: 'No, cancel!',
                customClass: {
                    confirmButton: 'my-custom-button',
                    cancelButton: 'my-custom-button'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: '/car-owner/delete-car',
                        type: 'GET',
                        data: {carId: carId},
                        headers: {
                            'X-CSRF-TOKEN': csrfToken
                        },
                        success: function (response) {
                            console.log("Car deleted successfully", response);
                            Swal.fire({
                                title: 'Deleted!',
                                text: 'Your car has been deleted.',
                                icon: 'success',
                                confirmButtonText: 'OK',
                                customClass: {
                                    confirmButton: 'my-custom-button'
                                }
                            }).then(() => {
                                window.location.href = '/car-owner/my-cars';
                            });
                        },
                        error: function (xhr, status, error) {
                            if (xhr.status === 401) {
                                console.log("Unauthorized delete: ", xhr.responseText);
                                Swal.fire({
                                    title: 'Not Deleted!',
                                    text: xhr.responseText,
                                    icon: 'warning',
                                    confirmButtonText: 'OK',
                                    customClass: {
                                        confirmButton: 'my-custom-button'
                                    }
                                });
                            } else {
                                console.log("Error deleting car", error);
                                Swal.fire({
                                    title: 'Error!',
                                    text: 'An error occurred. Please try again.',
                                    icon: 'error',
                                    confirmButtonText: 'OK',
                                    customClass: {
                                        confirmButton: 'my-custom-button'
                                    }
                                });
                            }
                        }
                    });
                }
            });
        }

        const MAX_FILE_MB = 200;
        const MAX_SIZE_BYTES = MAX_FILE_MB * 1024 * 1024;

        function uploadfile(imageView, inputFile) {
            const file = inputFile.files[0];
            if (file) {
                const validExtensions = ["jpg", "jpeg", "png"];
                const fileExtension = file.name.split('.').pop().toLowerCase();
                if (file.size > MAX_SIZE_BYTES) {
                    alert("File size must be less than 200MB");
                    inputFile.value = ""; // Reset input nếu file không hợp lệ
                    return;
                }
                // Kiểm tra phần mở rộng file
                if (!validExtensions.includes(fileExtension)) {
                    alert("Only accept file type: .jpg, .jpeg, .png");
                    inputFile.value = ""; // Reset input nếu file không hợp lệ
                    return;
                }

                const fileReader = new FileReader();
                fileReader.onload = function (e) {
                    imageView.style.backgroundImage = `url(${e.target.result})`;
                    imageView.style.backgroundSize = "cover";
                    imageView.style.backgroundPosition = "center";
                    imageView.innerHTML = "";
                };
                fileReader.readAsDataURL(file); // Đọc file dưới dạng URL để hiển thị
            }
        }


        function displayExistingImage(imageView, imageUrl) {
            if (imageUrl) {
                if (imageUrl.match(/\.(jpg|jpeg|png)$/i)) {
                    imageView.style.backgroundImage = 'url(/' + imageUrl.replaceAll("\\", "/") + ')';
                    imageView.style.backgroundSize = "cover";
                    imageView.style.backgroundPosition = "center";
                    imageView.innerHTML = "";
                } else {
                    imageView.style.backgroundImage = "none";
                    imageView.innerHTML = `
                <i class="fa-solid fa-file fa-2x"></i>
                <p>File đã tải lên</p>
            `;
                }
                imageView.style.border = "none";
            }
        }

        function initializeDropArea(index) {
            const dropArea = document.getElementById(`drop-area${index}`);
            const inputFile = document.getElementById(`input-file${index}`);
            const imageView = document.getElementById(`img-view${index}`);

            // Hiển thị ảnh đã có nếu có
            const existingImageUrl = imageView.getAttribute('data-image-url');
            if (existingImageUrl) {
                displayExistingImage(imageView, existingImageUrl);
            }

            // Xử lý sự kiện change của input file
            inputFile.addEventListener("change", function () {
                uploadfile(imageView, inputFile);
            });

            // Xử lý sự kiện dragover
            dropArea.addEventListener("dragover", function (e) {
                e.preventDefault();
                dropArea.style.background = "rgba(0, 0, 0, 0.1)";
            });

            // Xử lý sự kiện dragleave
            dropArea.addEventListener("dragleave", function (e) {
                e.preventDefault();
                if (!dropArea.contains(e.relatedTarget)) {
                    dropArea.style.background = "#d1d5d9";
                }
            });

            // Xử lý sự kiện drop
            dropArea.addEventListener("drop", function (e) {
                e.preventDefault();
                dropArea.style.background = "#d1d5d9";

                const files = e.dataTransfer.files;

                if (files.length > 0) {
                    const validExtensions = ["jpg", "jpeg", "png"];
                    const fileExtension = files[0].name.split('.').pop().toLowerCase();
                    if (files[0].size > MAX_SIZE_BYTES) {
                        alert("File size must be less than 200MB");
                        return;
                    }
                    // Kiểm tra phần mở rộng file
                    if (!validExtensions.includes(fileExtension)) {
                        alert("Only accept file type: .jpg, .jpeg, .png");
                        return;
                    }

                    inputFile.files = files; // Thiết lập files cho input
                    uploadfile(imageView, inputFile); // Gọi hàm uploadfile
                }
            });
        }

        // Khởi tạo tất cả các vùng upload
        for (let i = 1; i <= 7; i++) {
            initializeDropArea(i);
        }


        //API
        // Call API to fetch provinces, districts and wards
        // Fetch provinces and set default city
        async function fetchProvinces(defaultCity) {
            const response = await fetch('https://provinces.open-api.vn/api/p/');
            const provinces = await response.json();
            const citySelect = document.getElementById('province');

            provinces.forEach(province => {
                const option = document.createElement('option');
                option.value = province.code;
                option.textContent = province.name;
                if (province.code == defaultCity) {
                    option.selected = true;
                }
                citySelect.appendChild(option);
            });

            if (defaultCity) {
                fetchDistricts(defaultCity, document.getElementById('district').getAttribute('data-default'));
            }
        }

        // Fetch districts based on selected province and set default value
        async function fetchDistricts(provinceCode, defaultDistrict) {
            const response = await fetch(`https://provinces.open-api.vn/api/p/${provinceCode}?depth=2`);
            const provinceData = await response.json();
            const districtSelect = document.getElementById('district');

            districtSelect.innerHTML = '<option value="">Select District</option>';
            provinceData.districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district.code;
                option.textContent = district.name;
                if (district.code == defaultDistrict) {
                    option.selected = true;
                }
                districtSelect.appendChild(option);
            });

            if (defaultDistrict) {
                fetchWards(defaultDistrict, document.getElementById('ward').getAttribute('data-default'));
            }
        }

        // Fetch wards based on selected district and set default value
        async function fetchWards(districtCode, defaultWard) {
            const response = await fetch(`https://provinces.open-api.vn/api/d/${districtCode}?depth=2`);
            const districtData = await response.json();
            const wardSelect = document.getElementById('ward');

            wardSelect.innerHTML = '<option value="">Select Ward</option>';
            districtData.wards.forEach(ward => {
                const option = document.createElement('option');
                option.value = ward.code;
                option.textContent = ward.name;
                if (ward.code == defaultWard) {
                    option.selected = true;
                }
                wardSelect.appendChild(option);
            });
        }

        // Event listeners to load data on selection
        document.getElementById('province').addEventListener('change', function () {
            fetchDistricts(this.value);
            document.getElementById('ward').innerHTML = '<option value="">Select Ward</option>'; // Reset ward
            document.getElementById('district').disabled = this.value === ""; // Enable/disable district based on city selection
            document.getElementById('district').value = ""; // Reset district value
            document.getElementById('ward').disabled = true; // Disable ward selection
        });

        document.getElementById('district').addEventListener('change', function () {
            fetchWards(this.value);
            document.getElementById('ward').disabled = this.value === ""; // Enable/disable ward based on district selection
        });


        // Load provinces on page load with default values
        document.addEventListener('DOMContentLoaded', function () {
            const defaultCity = document.getElementById('province').getAttribute('data-default');
            fetchProvinces(defaultCity);
        });


        //Load price
        const basePrice = document.getElementById('basePrice');
        const basePricePreview = document.getElementById('previewPrice');
        basePrice.addEventListener('input', function () {
            const value = parseFloat(basePrice.value) || 0;
            basePricePreview.textContent = new Intl.NumberFormat('vi-VN').format(value);
        });

        const province = document.getElementById('province');
        const district = document.getElementById('district');
        const ward = document.getElementById('district');
        const previewLocation = document.getElementById('previewLocation');
        ward.addEventListener('change', function () {
            previewLocation.textContent = province.options[province.selectedIndex].text + ', ' + district.options[district.selectedIndex].text + ', ' + ward.options[ward.selectedIndex].text;
        });


        function checkDetails() {

            const mileage = document.getElementById('mileage').value;
            const fuelConsumption = document.getElementById('fuelConsumption').value;
            const province = document.getElementById('province').value;
            const district = document.getElementById('district').value;
            const ward = document.getElementById('ward').value;
            const street = document.getElementById('street').value;
            const checkedValues = [];
            const frontImage = document.getElementById("input-file4");
            const backImage = document.getElementById("input-file5");
            const leftImage = document.getElementById("input-file6")
            const rightImage = document.getElementById("input-file7")
            const frontImageUrl = document.getElementById('frontImage').value;
            const backImageUrl = document.getElementById('backImage').value;
            const leftImageUrl = document.getElementById('leftImage').value;
            const rightImageUrl = document.getElementById('rightImage').value;


            console.log(checkedValues);

            if (
                mileage === ''
                || fuelConsumption === ''
                || province === ''
                || district === ''
                || ward === ''
                || (frontImage.files.length === 0 && frontImageUrl === '')
                || (backImage.files.length === 0 && backImageUrl === '')
                || (leftImage.files.length === 0 && leftImageUrl === '')
                || (rightImage.files.length === 0 && rightImageUrl === '')) {
                Swal.fire({
                    title: 'Alert!',
                    text: 'Please fill in all required fields correctly.',
                    icon: 'warning',
                    confirmButtonText: 'OK'
                });
                return false;
            }
            return true;
        }
    </script>
    <script src="/js/update-car-validate.js"></script>
    </body>
</th:block>
</body>
</html>
